<Page x:Class="ArmenRestauran.Pages.OrdersPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Мои Заказы" Loaded="Page_Loaded">

    <Page.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </Page.Resources>

    <Grid Margin="20">
        <StackPanel>
            <TextBlock Text="ВАШИ БРОНИРОВАНИЯ И ЗАКАЗЫ" FontSize="20" FontWeight="Bold" 
                       HorizontalAlignment="Center" Margin="0,0,0,20" Foreground="#8B0000"/>

            <ListBox x:Name="LBoxOrders" Background="Transparent" BorderThickness="0">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border Background="White" CornerRadius="10" Padding="15" Margin="0,5" Width="700">
                            <StackPanel>
                                <Grid>
                                    <TextBlock Text="{Binding ReservationDate, StringFormat='Дата: {0:dd.MM.yyyy HH:mm}'}" 
                                               FontWeight="Bold" FontSize="16"/>
                                    <TextBlock Text="{Binding ReservationStatus}" 
                                               Visibility="{Binding ShowStatusText, Converter={StaticResource BoolToVis}}"
                                               Foreground="{Binding StatusColor}" HorizontalAlignment="Right" FontWeight="Bold"/>
                                </Grid>
                                <Separator Margin="0,10"/>
                                <TextBlock Text="{Binding ItemsSummary}" TextWrapping="Wrap" Margin="0,5" Foreground="Gray"/>
                                <Grid Margin="0,5">
                                    <TextBlock Text="{Binding TableNumber, StringFormat='Стол №{0}'}"/>
                                    <TextBlock Text="{Binding TotalAmount, StringFormat='Итого: {0} ₽'}" 
                                               HorizontalAlignment="Right" FontSize="18" FontWeight="Bold" Foreground="#8B0000"/>
                                </Grid>
                                <Button Content="ОТМЕНИТЬ ЗАКАЗ" 
                                        Click="BtnCancel_Click"
                                        Visibility="{Binding CanCancel, Converter={StaticResource BoolToVis}}"
                                        Background="#8B0000" Foreground="White" FontWeight="Bold"
                                        HorizontalAlignment="Right" Padding="15,5" Margin="0,10,0,0"/>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>
    </Grid>
</Page>